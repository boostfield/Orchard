@{
    Script.Require("NewsMarquee");
    Script.Require("Sly");
    ViewBag.Title = "AnniversaryHome";
}
<style>
    .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 99; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
            
        }

        /* Modal Content (image) */
        .modal-content {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 1080px;
            border-radius: 0;
        }
        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            opacity: 1;
        }

        .close:hover,
        .close:focus {
            color: white;
            text-decoration: none;
            cursor: pointer;
        }
</style>
<div class="top-bg">

</div>
<div class="container">
    
        <div id="carousel-anniversary" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                
                @for (var i = 0; i < ViewBag.banners.Count; i++)
                {
                    if (i == 0)
                    {
                        <li data-target="#carousel-anniversary" data-slide-to="0" class="active"></li>
                    }
                    else
                    {
                        <li data-target="#carousel-anniversary" data-slide-to="@i"></li>
                    }
                }
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
                @for (var i = 0; i < ViewBag.banners.Count; i++)
                {
                    if (i == 0)
                    {
                            <div class="item active" style="background-image: url('@ViewBag.banners[i].ImageAddress');" onclick="location.href = '@ViewBag.banners[i].LinkAddress';">
                            </div>
                    }
                    else
                    {
                                <div class="item" style="background-image: url('@ViewBag.banners[i].ImageAddress');" onclick="location.href = '@ViewBag.banners[i].LinkAddress';">
                                </div>
                      }
                  }
            </div>
            <a class="left carousel-control" href="#carousel-anniversary" role="button" data-slide="prev">
                <img src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/ic_banner_left.png"))"/>
            </a>
            <a class="right carousel-control" href="#carousel-anniversary" role="button" data-slide="next">
                <img src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/ic_banner_right.png"))" />
            </a>
        </div>
        <div class="row" style="margin-top: 2em;">
            <div class="col-md-6 col-sm-12 col-xs-12">
                <div class="banner1">
                    <img class="img-title" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_title_second.png"))" />
                    <img class="img-number pull-right" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_number_1.png"))" />
                    <ul class="list-group">
                        @foreach (var news in ViewBag.news)
                        {
                            <li class="list-group-item">
                                <div class="row">
                                    <div class="col-sm-9 title-name"><a href="@Url.Action("ANItem","XmContent",new { Id=@news.Id, contentTypeName  = "CelNews"})">@news.Title</a></div>
                                    <div class="col-sm-3 title-time">@news.CreatedUtc.ToLocalTime().ToString("yyyy-MM-dd")</div>
                                </div>

                            </li>
                        }


                    </ul>
                    <p class="more text-right"><a href="@Url.Action("ANPaging","XmContent",new { page = 1,pageSize=10, contentTypeName  = "CelNews"})">更多 ></a></p>
                 </div>
            </div>
            <div class="col-md-6 col-sm-12 col-xs-12" style="float: right;">
                <div class="donation">
                    <p class="title">-院庆捐赠-</p>
                    <hr />
                    <div class="row">
                        <div class="col-md-6">
                            <h3>大额捐赠</h3>
                            <ul id="news-ticker">
                                @foreach (var donation in ViewBag.largeDonation)
                                {
                                    <li onclick="location.href = '@Url.Action("DonationItem","XmContent",new { Id=@donation.Id})'">
                                        <div class="name">@donation.Title</div>
                                        <div class="fund">@String.Format("{0}元", @donation.DonationAmount)</div>

                                    </li>
                                }
                            </ul>
                            <div class="row text-right">
                                <a class="more" href="@Url.Action("DonationPaging","XmContent",new { page = 1,pageSize=10, donationType="large" })">更多 ></a>
                            </div>
                        </div>
                        <div class="col-md-6 second-donation">
                            <h3>其他捐赠</h3>
                            <ul id="news-ticker2">
                                @foreach (var donation in ViewBag.smallDonation)
                                {
                                    <li onclick="location.href = '@Url.Action("DonationItem","XmContent",new { Id=@donation.Id})'">
                                        <div class="name">@donation.Title</div>
                                        <div class="fund">@String.Format("{0}元", @donation.DonationAmount)</div>

                                    </li>
                                }
                            </ul>
                            <div class="row text-right">
                                <a class="more" href="@Url.Action("DonationPaging","XmContent",new { page = 1,pageSize=10, donationType="small" })">更多 ></a>
                            </div>
                        </div>
                    </div>
                    
                </div>
                
            </div>
            <div class="col-md-6 col-sm-12 col-xs-12" >
                <div class="banner2">
                    
                    <img class="img-title" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_title_first.png"))" />
                    <img class="img-number pull-right" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_number_2.png"))" />
                    <ul class="list-group">
                        @foreach (var notice in ViewBag.notice)
                        {
                            <li class="list-group-item">
                                <div class="row">
                                    <div class="col-sm-9 title-name"><a href="@Url.Action("ANItem","XmContent",new { Id=@notice.Id, contentTypeName  = "CelAnnouncement"})">@notice.Title</a></div>
                                    <div class="col-sm-3 title-time">@notice.CreatedUtc.ToLocalTime().ToString("yyyy-MM-dd")</div>
                                </div>

                            </li>
                        }
                    </ul>
                    <p class="more text-right"><a href="@Url.Action("ANPaging","XmContent",new { page = 1,pageSize=10, contentTypeName  = "CelAnnouncement"})">更多 ></a></p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 col-sm-12 col-xs-12">
                <div class="banner3">
                    <img class="img-cover pull-left" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_picture_third.jpg"))" />
                    <img class="img-number pull-right" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_number_3.png"))" />
                    <img class="img-title pull-right" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_title_third.png"))" />
                    <div class="clearfix"></div>
                    <div>
                        <ul class="list-group">
                            @foreach (var article in ViewBag.articles)
                            {
                                <li class="list-group-item">
                                    <div class="row">
                                        <div class="col-sm-8 title-name"><a href="@Url.Action("ANItem","XmContent",new { Id=@article.Id, contentTypeName  = "CelMatesArticle"})">@article.Title</a></div>
                                        <div class="col-sm-4 title-time">@article.CreatedUtc.ToLocalTime().ToString("yyyy-MM-dd")</div>
                                    </div>
                                </li>
                            }
                        </ul>
                        <p class="more text-right"><a href="@Url.Action("ANPaging","XmContent",new { page = 1,pageSize=10, contentTypeName  = "CelMatesArticle"})">更多 ></a></p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-sm-12 col-xs-12">
                <div class="banner4">
                    <img class="img-cover pull-left" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_picture_fourth.jpg"))" />
                    <img class="img-number pull-right" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_number_4.png"))" />
                    <img class="img-title pull-right" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_title_fourth.png"))" />
                    <div class="clearfix"></div>
                    <div>
                        <ul class="list-group">

                            @foreach (var show in ViewBag.shows)
                            {
                                <li class="list-group-item">
                                    <div class="row">
                                        <div class="col-sm-8 title-name"><a href="@Url.Action("ANItem","XmContent",new { Id=@show.Id, contentTypeName  = "CelMatesShows"})">@show.Title</a></div>
                                        <div class="col-sm-4 title-time">@show.CreatedUtc.ToLocalTime().ToString("yyyy-MM-dd")</div>
                                    </div>
                                </li>
                            }
                            
                        </ul>
                        <p class="more text-right"><a href="@Url.Action("ANPaging","XmContent",new { page = 1,pageSize=10, contentTypeName  = "CelMatesShows"})">更多 ></a></p>
                    </div>
                </div>
            </div>
        </div>
        
</div>
<div class="container-fluid" >
    <div >
        <img src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/img_picture_title.png"))" class="center-block" style="padding: 2em;"/>
    </div>
    <div class="row photo-gallery center-block" style="margin-bottom: 4em;">
        <img class="btn-backward hidden-xs" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/ic_banner_left.png"))" />
        <img class="btn-forward hidden-xs" src="@Url.Content(Html.ThemePath(WorkContext.CurrentTheme, "/Content/images/anniversary/ic_banner_right.png"))" />
       
            <div class="frame crazy center-block" id="crazy">
                
                <ul>
                    @foreach (var photo in ViewBag.gallery)
                    {
                        <li>
                            
                            <div class="text-content" style="font-size: 14px;" >@photo.Title</div>
                            <img src="@photo.ImageAddress" class="old-image"/>
                        </li>
                    }
                     

                </ul>
            </div>
        
        
    </div>
    <div id="imagePreviewModal" class="modal">
        <span class="close">×</span>
        <img class="modal-content" id="imagePreview" >
    </div>
</div>
<script>
   
$(function(){
    $('#news-ticker').newsTicker({
        row_height: 26,
        max_rows: 14,
        speed: 500,
        direction: 'up',
        duration: 2000,
        autostart: 1,
        pauseOnHover: 1
    });
    $('#news-ticker2').newsTicker({
        row_height: 26,
        max_rows: 14,
        speed: 500,
        direction: 'up',
        duration: 2000,
        autostart: 1,
        pauseOnHover: 1
    });
    var $frame = $('#crazy');
    var $slidee = $frame.children('ul').eq(0);
    var $wrap = $('.photo-gallery');

    // Call Sly on frame
    $frame.sly({
        horizontal: 1,
        itemNav: 'basic',
        smart: 1,
        activateOn: 'click',
        mouseDragging: 1,
        touchDragging: 1,
        releaseSwing: 1,
        startAt: 0,
        
        scrollBy: 1,
        
        activatePageOn: 'click',
        speed: 300,
        elasticBounds: 1,
        
        dragHandle: 1,
        dynamicHandle: 1,
        clickBar: 1,

        cycleBy: 'page',
        cycleInterval: 1000,
        pauseOnHover: 1,
        startPaused: 1,
        // Buttons
        forward: $wrap.find('.btn-forward'),
        backward: $wrap.find('.btn-backward'),
       
    });
    $(document).on('click', 'span.close', function () {
        var modal = document.getElementById("imagePreviewModal");
        modal.style.display = "none";
    });
    $(document).on('click', '.frame>ul>li', function () {
        var modal = document.getElementById("imagePreviewModal");
        var image = document.getElementById("imagePreview");
        image.src = $(this).find("img").attr('src');
        modal.style.display = "block";
    });
});

</script>
